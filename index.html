<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T≈Çumacz Polsko-Mitrolski</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 1200px;
            width: 100%;
            padding: 40px;
        }
        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1em;
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #e9ecef;
        }
        .tab {
            flex: 1;
            padding: 15px;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            color: #666;
            transition: all 0.3s;
        }
        .tab:hover {
            color: #667eea;
        }
        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }
        .screen {
            display: none;
        }
        .screen.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* T≈ÅUMACZ */
        .translator-box {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 15px;
        }
        .input-section {
            display: flex;
            flex-direction: column;
        }
        .language-label {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.2em;
        }
        textarea {
            width: 100%;
            height: 280px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            resize: vertical;
            transition: border-color 0.3s;
            font-family: 'Courier New', monospace;
        }
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        .pronunciation-box {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
            border: 2px solid #667eea;
        }
        .pronunciation-text {
            font-family: 'Courier New', monospace;
            font-size: 18px;
            color: #333;
            margin-top: 10px;
            padding: 10px;
            background: white;
            border-radius: 5px;
            min-height: 40px;
        }
        
        /* QUIZ */
        .option-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            margin: 15px 0;
            border-radius: 15px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            font-size: 1.3em;
            font-weight: bold;
            text-align: center;
        }
        .option-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }
        .quiz-question {
            font-size: 2.5em;
            color: #667eea;
            margin: 30px 0;
            font-weight: bold;
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
        }
        .answer-option {
            background: #f8f9fa;
            color: #333;
            padding: 20px;
            margin: 10px 0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
            font-size: 1.2em;
            text-align: center;
        }
        .answer-option:hover {
            background: #e9ecef;
            transform: translateX(10px);
        }
        .answer-option.correct {
            background: #28a745;
            color: white;
            border-color: #1e7e34;
        }
        .answer-option.wrong {
            background: #dc3545;
            color: white;
            border-color: #bd2130;
        }
        .score {
            font-size: 1.5em;
            color: #667eea;
            margin: 20px 0;
            font-weight: bold;
            text-align: center;
        }
        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            margin: 10px auto;
            display: block;
            transition: background 0.3s;
        }
        .btn:hover {
            background: #764ba2;
        }
        .btn-danger {
            background: #dc3545;
            margin-top: 30px;
        }
        .btn-danger:hover {
            background: #bd2130;
        }
        
        @media (max-width: 768px) {
            .translator-box {
                grid-template-columns: 1fr;
            }
            h1 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üî• T≈Çumacz Polsko-Mitrolski</h1>
        <p class="subtitle">Oficjalny t≈Çumacz jƒôzyka mitrolskiego</p>
        
        <!-- ZAK≈ÅADKI -->
        <div class="tabs">
            <button class="tab active" onclick="showTab('translator')">üìñ T≈ÅUMACZ</button>
            <button class="tab" onclick="showTab('quiz')">üéÆ QUIZ</button>
        </div>
        
        <!-- ========== T≈ÅUMACZ ========== -->
        <div id="translator" class="screen active">
            <div class="translator-box">
                <div class="input-section">
                    <div class="language-label">üáµüá± Polski</div>
                    <textarea id="leftText" placeholder="Wpisz tekst po polsku..."></textarea>
                </div>

                <div class="input-section">
                    <div class="language-label">üî• Mitrolski</div>
                    <textarea id="rightText" placeholder="Wynik pojawi siƒô automatycznie..." readonly></textarea>
                </div>
            </div>

            <div class="pronunciation-box">
                <strong style="color: #667eea; font-size: 16px;">üîä Wymowa:</strong>
                <button onclick="speakCurrentWord()" style="margin-left: 10px; padding: 8px 15px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 14px;">
                    üîä S≈Çuchaj
                </button>
                <div class="pronunciation-text" id="pronunciationText">Wpisz co≈õ po lewej stronie...</div>
            </div>
        </div>
        
        <!-- ========== QUIZ ========== -->
        <div id="quiz" class="screen">
            <!-- Ekran 1: Wyb√≥r trybu -->
            <div id="quizScreen1" class="screen active">
                <h2 style="text-align: center; color: #333; margin-bottom: 20px;">Wybierz tryb gry:</h2>
                
                <div class="option-card" onclick="selectMode('profanity')">
                    üî• Z PRZEKLE≈ÉSTWAMI
                </div>
                <div class="option-card" onclick="selectMode('clean')">
                    ‚ú® BEZ PRZEKLE≈ÉSTW
                </div>
            </div>

            <!-- Ekran 2: Wyb√≥r z liczbami / bez liczb -->
            <div id="quizScreen2" class="screen">
                <h2 style="text-align: center; color: #333; margin-bottom: 20px;">Czy uwzglƒôdniƒá liczby?</h2>
                
                <div class="option-card" onclick="selectNumbers(true)">
                    üî¢ Z LICZBAMI<br>
                    <small style="font-size: 0.7em; opacity: 0.9;">Pytania o liczby 0-100</small>
                </div>
                <div class="option-card" onclick="selectNumbers(false)">
                    ‚ùå BEZ LICZB<br>
                    <small style="font-size: 0.7em; opacity: 0.9;">Tylko s≈Çowa (bez liczb)</small>
                </div>
            </div>

            <!-- Ekran 3: Wyb√≥r liczby odpowiedzi -->
            <div id="quizScreen3" class="screen">
                <h2 style="text-align: center; color: #333; margin-bottom: 20px;">Wybierz poziom trudno≈õci:</h2>
                
                <div class="option-card" onclick="selectAnswers(4)">
                    üéØ 4 ODPOWIEDZI<br>
                    <small style="font-size: 0.7em; opacity: 0.9;">≈Åatwiejszy</small>
                </div>
                <div class="option-card" onclick="selectAnswers(5)">
                    üí™ 5 ODPOWIEDZI<br>
                    <small style="font-size: 0.7em; opacity: 0.9;">Trudniejszy</small>
                </div>
                <div class="option-card" onclick="selectAnswers('input')">
                    ‚å®Ô∏è WPISZ ODPOWIED≈π<br>
                    <small style="font-size: 0.7em; opacity: 0.9;">Najtrudniejszy - bez podpowiedzi!</small>
                </div>
            </div>

            <!-- Ekran 4: Gra -->
            <div id="quizScreen4" class="screen">
                <div class="score" id="scoreDisplay">Pytanie: 1 | Wynik: 0 | Dok≈Çadno≈õƒá: 0%</div>
                
                <div class="quiz-question" id="questionText">Jak brzmi "kurwa" po mitrolsku?</div>
                
                <div id="answersContainer"></div>
                
                <button class="btn" id="nextButton" style="display: none;" onclick="nextQuestion()">
                    Nastƒôpne pytanie ‚Üí
                </button>
            </div>

            <!-- Ekran 5: Wynik ko≈Ñcowy -->
            <div id="quizScreen5" class="screen">
                <h2 style="text-align: center; color: #667eea; font-size: 2em;">üéâ Koniec Quizu!</h2>
                <div class="score" id="finalScore" style="font-size: 3em; margin: 40px 0;">0/10</div>
                <p id="finalMessage" style="text-align: center; font-size: 1.3em; color: #666; margin-bottom: 30px;"></p>
                <button class="btn" onclick="restartQuiz()">üîÑ Zagraj ponownie</button>
            </div>
        </div>
    </div>

    <script>
        const POLISH_TO_ENGLISH = {
            "kurwa":"fuck","kurwy":"fucks","kurwƒÖ":"fuck","kurwie":"fuck","chuj":"dick","chuja":"dick",
            "chujem":"dick","chuje":"dicks","dupa":"ass","dupy":"ass","dupƒÖ":"ass","dupie":"ass",
            "g√≥wno":"shit","g√≥wna":"shit","g√≥wnem":"shit","pierdoliƒá":"fuck","pierdolƒô":"fuck",
            "pierdoli":"fucks","jebaƒá":"fuck","jebiƒô":"fuck","jebie":"fucks","dziwka":"bitch",
            "dziwki":"bitches","dziwkƒô":"bitch","suka":"bitch","suki":"bitches","skurwysyn":"bastard",
            "skurwysyna":"bastard","debil":"idiot","debila":"idiot","idiota":"idiot","idioty":"idiots",
            "g≈Çupi":"stupid","g≈Çupia":"stupid","g≈Çupie":"stupid","tak":"yes","nie":"no","mo≈ºe":"maybe",
            "hej":"hey","cze≈õƒá":"hello","elo":"hello","siema":"hello","dziƒôki":"thanks",
            "dziƒôkujƒô":"thank you","proszƒô":"please","cz≈Çowiek":"human","ludzie":"people","osoba":"person",
            "mƒô≈ºczyzna":"man","kobieta":"woman","dziecko":"child","ch≈Çopiec":"boy","dziewczynka":"girl",
            "mama":"mom","tata":"dad","matka":"mother","ojciec":"father","syn":"son","c√≥rka":"daughter",
            "brat":"brother","siostra":"sister","pies":"dog","psy":"dogs","kot":"cat","koty":"cats",
            "ko≈Ñ":"horse","krowa":"cow","≈õwinia":"pig","ptak":"bird","ryba":"fish","dom":"home",
            "mieszkanie":"apartment","pok√≥j":"room","kuchnia":"kitchen","≈Çazienka":"bathroom",
            "drzwi":"door","okno":"window","st√≥≈Ç":"table","krzes≈Ço":"chair","dzie≈Ñ":"day","noc":"night",
            "rano":"morning","wiecz√≥r":"evening","rok":"year","miesiƒÖc":"month","tydzie≈Ñ":"week",
            "godzina":"hour","minuta":"minute","teraz":"now","jutro":"tomorrow","wczoraj":"yesterday",
            "jedzenie":"food","woda":"water","mleko":"milk","chleb":"bread","miƒôso":"meat","ry≈º":"rice",
            "jab≈Çko":"apple","banan":"banana",
            "zero":"zero","jeden":"one","dwa":"two","trzy":"three","cztery":"four",
            "piƒôƒá":"five","sze≈õƒá":"six","siedem":"seven","osiem":"eight","dziewiƒôƒá":"nine","dziesiƒôƒá":"ten",
            "jedena≈õcie":"eleven","dwana≈õcie":"twelve","trzyna≈õcie":"thirteen","czterna≈õcie":"fourteen",
            "piƒôtna≈õcie":"fifteen","szesna≈õcie":"sixteen","siedemna≈õcie":"seventeen","osiemna≈õcie":"eighteen",
            "dziewiƒôtna≈õcie":"nineteen","dwadzie≈õcia":"twenty","trzydzie≈õci":"thirty","czterdzie≈õci":"forty",
            "piƒôƒádziesiƒÖt":"fifty","sze≈õƒádziesiƒÖt":"sixty","siedemdziesiƒÖt":"seventy","osiemdziesiƒÖt":"eighty",
            "dziewiƒôƒádziesiƒÖt":"ninety","sto":"hundred",
            "0":"zero","1":"one","2":"two","3":"three","4":"four","5":"five","6":"six","7":"seven","8":"eight","9":"nine",
            "10":"ten","11":"eleven","12":"twelve","13":"thirteen","14":"fourteen","15":"fifteen",
            "16":"sixteen","17":"seventeen","18":"eighteen","19":"nineteen","20":"twenty",
            "21":"twenty one","22":"twenty two","23":"twenty three","24":"twenty four","25":"twenty five",
            "26":"twenty six","27":"twenty seven","28":"twenty eight","29":"twenty nine","30":"thirty",
            "31":"thirty one","32":"thirty two","33":"thirty three","34":"thirty four","35":"thirty five",
            "36":"thirty six","37":"thirty seven","38":"thirty eight","39":"thirty nine","40":"forty",
            "41":"forty one","42":"forty two","43":"forty three","44":"forty four","45":"forty five",
            "46":"forty six","47":"forty seven","48":"forty eight","49":"forty nine","50":"fifty",
            "51":"fifty one","52":"fifty two","53":"fifty three","54":"fifty four","55":"fifty five",
            "56":"fifty six","57":"fifty seven","58":"fifty eight","59":"fifty nine","60":"sixty",
            "61":"sixty one","62":"sixty two","63":"sixty three","64":"sixty four","65":"sixty five",
            "66":"sixty six","67":"sixty seven","68":"sixty eight","69":"sixty nine","70":"seventy",
            "71":"seventy one","72":"seventy two","73":"seventy three","74":"seventy four","75":"seventy five",
            "76":"seventy six","77":"seventy seven","78":"seventy eight","79":"seventy nine","80":"eighty",
            "81":"eighty one","82":"eighty two","83":"eighty three","84":"eighty four","85":"eighty five",
            "86":"eighty six","87":"eighty seven","88":"eighty eight","89":"eighty nine","90":"ninety",
            "91":"ninety one","92":"ninety two","93":"ninety three","94":"ninety four","95":"ninety five",
            "96":"ninety six","97":"ninety seven","98":"ninety eight","99":"ninety nine","100":"one hundred",
            "byƒá":"be","mieƒá":"have","robiƒá":"do","i≈õƒá":"go","widzieƒá":"see","wiedzieƒá":"know",
            "chcieƒá":"want","m√≥c":"can","musieƒá":"must","kochaƒá":"love","lubiƒá":"like","je≈õƒá":"eat",
            "piƒá":"drink","dobry":"good","z≈Çy":"bad","wielki":"big","ma≈Çy":"small","nowy":"new",
            "stary":"old","piƒôkny":"beautiful","brzydki":"ugly","szybki":"fast","wolny":"slow"
        };

        // ROZBICIE LICZBY NA SK≈ÅADOWE (dziesiƒÖtki, setki, tysiƒÖce)
        function rozbiNaSk≈Çadowe(num) {
            const str = num.toString();
            const len = str.length;
            const result = [];
            
            for (let i = 0; i < len; i++) {
                const digit = parseInt(str[i]);
                if (digit !== 0) {
                    const place = Math.pow(10, len - i - 1);
                    result.push(digit * place);
                }
            }
            
            return result;
        }
        // Przyk≈Çad: rozbiNaSk≈Çadowe(2024) ‚Üí [2000, 20, 4]
        // Przyk≈Çad: rozbiNaSk≈Çadowe(567) ‚Üí [500, 60, 7]

        // KONWERSJA NA LICZBY RZYMSKIE
        function toRoman(num) {
            if (num === 0) return '0';
            const romanNumerals = [
                [1000, 'M'], [900, 'CM'], [500, 'D'], [400, 'CD'],
                [100, 'C'], [90, 'XC'], [50, 'L'], [40, 'XL'],
                [10, 'X'], [9, 'IX'], [5, 'V'], [4, 'IV'], [1, 'I']
            ];
            let result = '';
            for (let [value, numeral] of romanNumerals) {
                while (num >= value) {
                    result += numeral;
                    num -= value;
                }
            }
            return result;
        }

        // FORMAT ARABSKA-RZYMSKA
        function arabskaRzymska(number) {
            const digits = number.toString().split('');
            const result = digits.map((digit, index) => {
                const d = parseInt(digit);
                // Parzyste indeksy (0, 2, 4...) = arabska
                // Nieparzyste indeksy (1, 3, 5...) = rzymska
                if (index % 2 === 0) {
                    // Arabska
                    return d.toString();
                } else {
                    // Rzymska (ale zero = 0)
                    return d === 0 ? '0' : toRoman(d);
                }
            });
            return result.join(''); // BEZ my≈õlnik√≥w
        }

        // KONWERSJA LICZB NA ANGIELSKI (do tryliona)
        function numberToEnglish(num) {
            if (num === 0) return "zero";
            
            const ones = ["", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine"];
            const teens = ["ten", "eleven", "twelve", "thirteen", "fourteen", "fifteen", "sixteen", "seventeen", "eighteen", "nineteen"];
            const tens = ["", "", "twenty", "thirty", "forty", "fifty", "sixty", "seventy", "eighty", "ninety"];
            
            function convertLessThanThousand(n) {
                if (n === 0) return "";
                if (n < 10) return ones[n];
                if (n < 20) return teens[n - 10];
                if (n < 100) {
                    const ten = Math.floor(n / 10);
                    const one = n % 10;
                    return tens[ten] + (one > 0 ? " " + ones[one] : "");
                }
                const hundred = Math.floor(n / 100);
                const rest = n % 100;
                return ones[hundred] + " hundred" + (rest > 0 ? " " + convertLessThanThousand(rest) : "");
            }
            
            if (num < 1000) return convertLessThanThousand(num);
            
            const scales = [
                { value: 1000000000000, name: "trillion" },
                { value: 1000000000, name: "billion" },
                { value: 1000000, name: "million" },
                { value: 1000, name: "thousand" }
            ];
            
            let result = "";
            for (let scale of scales) {
                if (num >= scale.value) {
                    const quotient = Math.floor(num / scale.value);
                    result += convertLessThanThousand(quotient) + " " + scale.name + " ";
                    num %= scale.value;
                }
            }
            
            if (num > 0) {
                result += convertLessThanThousand(num);
            }
            
            return result.trim();
        }

        function numberToMitrolski(num) {
            const english = numberToEnglish(num);
            return polishToMitrolski(num.toString(), english);
        }

        function cleanMitrolskiRules(word) {
            if (!word) return "";
            word = word.toLowerCase();
            word = word.replace(/[^a-z]/g, '');
            word = word.replace(/[awop]/g, '');
            while (word && 'yxwzk'.includes(word[0])) word = word.slice(1);
            while (word && 'yxwzk'.includes(word[word.length-1])) word = word.slice(0, -1);
            return word;
        }

        function swapThirdWithLast(word) {
            if (word.length >= 3) {
                let chars = word.split('');
                [chars[2], chars[chars.length-1]] = [chars[chars.length-1], chars[2]];
                return chars.join('');
            }
            return word;
        }

        function polishToMitrolski(polishWord, englishWord = null) {
            const english = englishWord || POLISH_TO_ENGLISH[polishWord.toLowerCase()] || polishWord;
            const reversed = english.split('').reverse().join('');
            const cleaned = cleanMitrolskiRules(reversed);
            const final = swapThirdWithLast(cleaned);
            return final || polishWord;
        }

        const translationCache = {};
        let currentFullText = '';

        function showTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tab).classList.add('active');
            
            if (tab === 'quiz') {
                document.getElementById('quizScreen1').classList.add('active');
                document.getElementById('quizScreen2').classList.remove('active');
                document.getElementById('quizScreen3').classList.remove('active');
                document.getElementById('quizScreen4').classList.remove('active');
                document.getElementById('quizScreen5').classList.remove('active');
            }
        }

        function speakPronunciation(text) {
            if (!text || !window.speechSynthesis) {
                alert('Twoja przeglƒÖdarka nie obs≈Çuguje syntezy mowy!');
                return;
            }
            window.speechSynthesis.cancel();
            
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'en-US';
            utterance.rate = 0.85;
            utterance.pitch = 1;
            window.speechSynthesis.speak(utterance);
        }

        function speakCurrentWord() {
            if (currentFullText) {
                speakPronunciation(currentFullText);
            } else {
                alert('Najpierw wpisz co≈õ do przet≈Çumaczenia!');
            }
        }

        function translate() {
            const leftText = document.getElementById('leftText').value;
            const rightText = document.getElementById('rightText');
            const pronunciationText = document.getElementById('pronunciationText');

            if (!leftText.trim()) {
                rightText.value = '';
                pronunciationText.textContent = 'Wpisz co≈õ po lewej stronie...';
                currentFullText = '';
                return;
            }

            // Znajd≈∫ wszystkie s≈Çowa i liczby
            const tokens = leftText.match(/[a-zƒÖƒáƒô≈Ç≈Ñ√≥≈õ≈∫≈ºA-ZƒÑƒÜƒò≈Å≈É√ì≈ö≈π≈ª]+|\d+/g) || [];
            
            // ZAPIS - arabskaRzymska bez my≈õlnik√≥w
            const translatedWords = tokens.map(token => {
                if (/^\d+$/.test(token)) {
                    const num = parseInt(token);
                    return arabskaRzymska(num);
                } else {
                    if (!translationCache[token]) {
                        translationCache[token] = polishToMitrolski(token);
                    }
                    return translationCache[token];
                }
            });
            
            const translatedText = translatedWords.join(' ');
            rightText.value = translatedText;
            
            // WYMOWA - rozbicie na dziesiƒÖtki/setki
            const pronunciationWords = [];
            for (let token of tokens) {
                if (/^\d+$/.test(token)) {
                    const num = parseInt(token);
                    const skladowe = rozbiNaSk≈Çadowe(num);
                    // Ka≈ºda sk≈Çadowa (2000, 20, 4) osobno
                    const parts = skladowe.map(n => numberToMitrolski(n));
                    pronunciationWords.push(parts.join(' ')); // Spacje w liczbach
                } else {
                    if (!translationCache[token]) {
                        translationCache[token] = polishToMitrolski(token);
                    }
                    pronunciationWords.push(translationCache[token]);
                }
            }
            
            // Dla TTS - kropki = wiƒôksze pauzy
            currentFullText = pronunciationWords.join('. ');
            // Dla wy≈õwietlania - normalne spacje
            const displayText = pronunciationWords.join(' ');
            pronunciationText.innerHTML = `<strong>Wymowa:</strong> ${displayText}`;
        }

        document.getElementById('leftText').addEventListener('input', translate);

        const WORDS_PROFANITY_WITH_ALL = {
            // Przekle≈Ñstwa
            "kurwa":"fuck","chuj":"dick","dupa":"ass","g√≥wno":"shit","pierdoliƒá":"fuck",
            "jebaƒá":"fuck","dziwka":"bitch","suka":"bitch","skurwysyn":"bastard",
            "debil":"idiot","idiota":"idiot","g≈Çupi":"stupid",
            // Normalne s≈Çowa
            "hej":"hey","cze≈õƒá":"hello","tak":"yes","nie":"no","dom":"home","kot":"cat",
            "pies":"dog","mama":"mom","tata":"dad","dobry":"good","z≈Çy":"bad","wielki":"big",
            "ma≈Çy":"small","woda":"water","jedzenie":"food","dzie≈Ñ":"day","noc":"night",
            "rano":"morning","rok":"year",
            // Liczby jako S≈ÅOWA
            "zero":"zero","jeden":"one","dwa":"two","trzy":"three","cztery":"four",
            "piƒôƒá":"five","sze≈õƒá":"six","siedem":"seven","osiem":"eight","dziewiƒôƒá":"nine",
            "dziesiƒôƒá":"ten","jedena≈õcie":"eleven","dwana≈õcie":"twelve","trzyna≈õcie":"thirteen",
            "czterna≈õcie":"fourteen","piƒôtna≈õcie":"fifteen","szesna≈õcie":"sixteen","siedemna≈õcie":"seventeen",
            "osiemna≈õcie":"eighteen","dziewiƒôtna≈õcie":"nineteen","dwadzie≈õcia":"twenty",
            "trzydzie≈õci":"thirty","czterdzie≈õci":"forty","piƒôƒádziesiƒÖt":"fifty","sto":"hundred"
        };

        const WORDS_CLEAN_WITH_NUMBERS = {
            "hej":"hey","cze≈õƒá":"hello","tak":"yes","nie":"no","dom":"home","kot":"cat",
            "pies":"dog","mama":"mom","tata":"dad","dobry":"good","z≈Çy":"bad","wielki":"big",
            "ma≈Çy":"small","woda":"water","jedzenie":"food","dzie≈Ñ":"day","noc":"night",
            "rano":"morning","rok":"year",
            // Liczby jako S≈ÅOWA
            "zero":"zero","jeden":"one","dwa":"two","trzy":"three","cztery":"four",
            "piƒôƒá":"five","sze≈õƒá":"six","siedem":"seven","osiem":"eight","dziewiƒôƒá":"nine",
            "dziesiƒôƒá":"ten","jedena≈õcie":"eleven","dwana≈õcie":"twelve","trzyna≈õcie":"thirteen",
            "czterna≈õcie":"fourteen","piƒôtna≈õcie":"fifteen","szesna≈õcie":"sixteen","siedemna≈õcie":"seventeen",
            "osiemna≈õcie":"eighteen","dziewiƒôtna≈õcie":"nineteen","dwadzie≈õcia":"twenty",
            "trzydzie≈õci":"thirty","czterdzie≈õci":"forty","piƒôƒádziesiƒÖt":"fifty","sto":"hundred"
        };

        const WORDS_CLEAN_NO_NUMBERS = {
            "hej":"hey","cze≈õƒá":"hello","tak":"yes","nie":"no","dom":"home","kot":"cat",
            "pies":"dog","mama":"mom","tata":"dad","dobry":"good","z≈Çy":"bad","wielki":"big",
            "ma≈Çy":"small","woda":"water","jedzenie":"food","dzie≈Ñ":"day","noc":"night",
            "rano":"morning","rok":"year"
        };

        let gameMode = '';
        let includeNumbers = true;
        let numAnswers = 4;
        let isInputMode = false;
        let score = 0;
        let totalQuestions = 0;
        let selectedAnswer = false;
        let currentCorrectAnswer = '';

        function selectMode(mode) {
            gameMode = mode;
            document.getElementById('quizScreen1').classList.remove('active');
            // Wszystkie tryby pytajƒÖ o liczby
            document.getElementById('quizScreen2').classList.add('active');
        }

        function selectNumbers(withNumbers) {
            includeNumbers = withNumbers;
            document.getElementById('quizScreen2').classList.remove('active');
            document.getElementById('quizScreen3').classList.add('active');
        }

        function selectAnswers(num) {
            if (num === 'input') {
                isInputMode = true;
                numAnswers = 0;
            } else {
                isInputMode = false;
                numAnswers = num;
            }
            score = 0;
            totalQuestions = 0;
            document.getElementById('quizScreen3').classList.remove('active');
            document.getElementById('quizScreen4').classList.add('active');
            showQuestion();
        }

        function showQuestion() {
            selectedAnswer = false;
            document.getElementById('nextButton').style.display = 'none';
            
            let wordDict;
            if (gameMode === 'profanity') {
                wordDict = WORDS_PROFANITY_WITH_ALL;
            } else {
                wordDict = includeNumbers ? WORDS_CLEAN_WITH_NUMBERS : WORDS_CLEAN_NO_NUMBERS;
            }
            
            let polish, english, correct;
            let isNumberQuestion = false;
            
            // Je≈õli liczby sƒÖ w≈ÇƒÖczone, 30% szans na pytanie o cyfrƒô
            if (includeNumbers && Math.random() < 0.3) {
                // Losuj liczbƒô (r√≥≈ºne zakresy) - MAKSYMALNIE DO 1000
                const rand = Math.random();
                let num;
                if (rand < 0.5) {
                    num = Math.floor(Math.random() * 100); // 0-99
                } else if (rand < 0.85) {
                    num = Math.floor(Math.random() * 500); // 0-499
                } else {
                    num = Math.floor(Math.random() * 1001); // 0-1000
                }
                
                polish = num.toString();
                correct = arabskaRzymska(num);
                isNumberQuestion = true;
            } else {
                // Zwyk≈Çe s≈Çowo
                const allWords = Object.entries(wordDict);
                [polish, english] = allWords[Math.floor(Math.random() * allWords.length)];
                correct = polishToMitrolski(polish, english);
                isNumberQuestion = false;
            }
            
            currentCorrectAnswer = correct;
            
            totalQuestions++;
            document.getElementById('questionText').textContent = `Jak brzmi "${polish}" po mitrolsku?`;
            document.getElementById('scoreDisplay').textContent = 
                `Pytanie: ${totalQuestions} | Wynik: ${score} | Dok≈Çadno≈õƒá: ${totalQuestions > 0 ? Math.round((score/totalQuestions)*100) : 0}%`;
            
            const container = document.getElementById('answersContainer');
            container.innerHTML = '';
            
            if (isInputMode) {
                container.innerHTML = `
                    <input type="text" id="userAnswer" 
                           style="width: 100%; padding: 20px; font-size: 1.5em; border: 3px solid #667eea; 
                                  border-radius: 10px; text-align: center; margin: 20px 0;"
                           placeholder="Wpisz odpowied≈∫ po mitrolsku..." 
                           autocomplete="off">
                    <button class="btn" onclick="checkInputAnswer()" style="margin-top: 20px; font-size: 1.2em;">
                        ‚úì SPRAWD≈π ODPOWIED≈π
                    </button>
                `;
                setTimeout(() => document.getElementById('userAnswer').focus(), 100);
                
                document.getElementById('userAnswer').addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        checkInputAnswer();
                    }
                });
            } else {
                const allAnswers = new Set([correct]);
                const allWords = Object.entries(wordDict);
                
                while (allAnswers.size < numAnswers) {
                    if (isNumberQuestion) {
                        // Pytanie o liczbƒô - b≈Çƒôdne odpowiedzi te≈º jako liczby
                        const rand = Math.random();
                        let num;
                        if (rand < 0.5) {
                            num = Math.floor(Math.random() * 100);
                        } else if (rand < 0.85) {
                            num = Math.floor(Math.random() * 500);
                        } else {
                            num = Math.floor(Math.random() * 1001);
                        }
                        const wrongAnswer = arabskaRzymska(num);
                        if (wrongAnswer && wrongAnswer !== correct) {
                            allAnswers.add(wrongAnswer);
                        }
                    } else {
                        // Pytanie o s≈Çowo - b≈Çƒôdne odpowiedzi jako s≈Çowa
                        const randomWord = allWords[Math.floor(Math.random() * allWords.length)];
                        const wrongAnswer = polishToMitrolski(randomWord[0], randomWord[1]);
                        if (wrongAnswer && wrongAnswer !== correct) {
                            allAnswers.add(wrongAnswer);
                        }
                    }
                }
                
                const answers = Array.from(allAnswers).sort(() => Math.random() - 0.5);
                
                answers.forEach(answer => {
                    const div = document.createElement('div');
                    div.className = 'answer-option';
                    div.textContent = answer;
                    div.onclick = () => checkAnswer(answer, correct, div);
                    container.appendChild(div);
                });
            }
        }

        function checkAnswer(selected, correct, element) {
            if (selectedAnswer) return;
            selectedAnswer = true;
            
            if (selected === correct) {
                element.classList.add('correct');
                score++;
                document.getElementById('scoreDisplay').textContent = 
                    `Pytanie: ${totalQuestions} | Wynik: ${score} | Dok≈Çadno≈õƒá: ${Math.round((score/totalQuestions)*100)}%`;
            } else {
                element.classList.add('wrong');
                const options = document.querySelectorAll('.answer-option');
                options.forEach(opt => {
                    if (opt.textContent === correct) {
                        opt.classList.add('correct');
                    }
                });
            }
            
            document.getElementById('nextButton').style.display = 'block';
        }

        function checkInputAnswer() {
            if (selectedAnswer) return;
            selectedAnswer = true;
            
            const userAnswer = document.getElementById('userAnswer').value.trim().toLowerCase();
            const correct = currentCorrectAnswer.toLowerCase();
            
            const container = document.getElementById('answersContainer');
            
            if (userAnswer === correct) {
                score++;
                document.getElementById('scoreDisplay').textContent = 
                    `Pytanie: ${totalQuestions} | Wynik: ${score} | Dok≈Çadno≈õƒá: ${Math.round((score/totalQuestions)*100)}%`;
                container.innerHTML = `
                    <div style="background: #28a745; color: white; padding: 30px; border-radius: 15px; 
                                text-align: center; font-size: 1.5em; margin: 20px 0;">
                        ‚úì DOBRZE! Poprawna odpowied≈∫: <strong>${currentCorrectAnswer}</strong>
                    </div>
                `;
            } else {
                container.innerHTML = `
                    <div style="background: #dc3545; color: white; padding: 30px; border-radius: 15px; 
                                text-align: center; font-size: 1.5em; margin: 20px 0;">
                        ‚úó ≈πLE! Twoja odpowied≈∫: <strong>${userAnswer || '(pusta)'}</strong><br>
                        Poprawna odpowied≈∫: <strong>${currentCorrectAnswer}</strong>
                    </div>
                `;
            }
            
            document.getElementById('nextButton').style.display = 'block';
        }

        function nextQuestion() {
            showQuestion();
        }

        function endQuiz() {
            showFinalScore();
        }

        function showFinalScore() {
            document.getElementById('quizScreen4').classList.remove('active');
            document.getElementById('quizScreen5').classList.add('active');
            
            document.getElementById('finalScore').textContent = `${score}/${totalQuestions}`;
            
            const percentage = (score / totalQuestions) * 100;
            let message = '';
            if (percentage === 100) message = 'üèÜ PERFEKCYJNIE! Jeste≈õ mistrzem mitrolskiego!';
            else if (percentage >= 80) message = 'üî• ≈öWIETNIE! Bardzo dobra znajomo≈õƒá!';
            else if (percentage >= 60) message = 'üëç NIE≈πLE! Jeszcze trochƒô praktyki!';
            else if (percentage >= 40) message = 'üòÖ ≈öREDNIO! Potrzebujesz wiƒôcej nauki!';
            else message = 'üò¢ S≈ÅABO! Musisz siƒô jeszcze pouczyƒá!';
            
            document.getElementById('finalMessage').textContent = message;
        }

        function restartQuiz() {
            document.getElementById('quizScreen5').classList.remove('active');
            document.getElementById('quizScreen1').classList.add('active');
        }
    </script>
</body>
</html>
